plugins {
    id "com.gradle.plugin-publish" version "0.9.10"
    id 'groovy'
    id 'java-gradle-plugin'
    id "net.researchgate.release" version "2.6.0"
    id "com.palantir.idea-test-fix" version "0.1.0"
}

repositories {
    jcenter()
    gradlePluginPortal()
}

dependencies {
    compile gradleApi()
    compile localGroovy()
    compile 'gradle.plugin.nl.javadude.gradle.plugins:license-gradle-plugin:0.14.0'

    testCompile 'junit:junit:4.12'
    testCompile 'com.google.guava:guava:24.1-jre'
    testCompile('org.spockframework:spock-core:1.1-groovy-2.4') {
        exclude(group: 'org.codehaus.groovy')
    }
}

pluginBundle {
    website = 'https://techshroom.com'
    vcsUrl = 'https://github.com/TechShroom/incise-blue'

    plugins {
        inciseBlue {
            id = project.group + '.' + project.name
            displayName = 'incise-blue plugin'
            tags = ['incise-blue', 'apt', 'annotation-processing', 'com.techshroom.inciseblue.maven', 'sonatype', 'deploy', 'java']
            description = "TechShroom's own build plugin. Extremely biased towards internal desires."
        }
    }
}

afterReleaseBuild.dependsOn 'publishPlugins'
